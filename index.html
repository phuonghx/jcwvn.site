<!DOCTYPE html>
<html lang="vi">

<head>
    <title>Sơ đồ nhà máy – tương tác (SVG + Google Sheets)</title>
    <link rel="icon" href="/assets/images/logo.jpg" type="image/jpg">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather:900&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,500,600,700&display=swap" />

    <link rel="stylesheet" href="/assets/css/style.css" />

</head>

<body>
    <div class="wrap">
        <h1 style="font-size:22px;margin:6px 2px 10px">Sơ đồ nhà máy – điểm thông tin tương tác</h1>
        <p class="muted" style="margin-top:0">Rê/chạm vùng để xem thông tin. Kéo/nhúm để <b>pan/zoom</b>. Nút +/− và
            <b>lăn chuột</b> sẽ <b>zoom theo vị trí con trỏ</b>.
        </p>

        <div class="toolbar">
            <div class="legend">
                <span class="pill"><span class="dot" style="background:var(--ok)"></span> Hoạt Động</span>
                <span class="pill"><span class="dot" style="background:var(--warn)"></span> Cảnh Báo</span>
                <span class="pill"><span class="dot" style="background:var(--bad)"></span> Đã Đầy</span>
                <span class="pill"><span class="dot" style="background:var(--accent)"></span> Khác</span>
            </div>
            <div style="display:flex;gap:8px;align-items:center">
                <button id="refreshBtn" class="btn">Tải lại dữ liệu</button>
                <a class="btn"
                    href="https://docs.google.com/spreadsheets/d/17YmmVafz78B5zWve0XrF7Y9Nj4nI7ovEn3TAwr8w8Bo/edit?gid=1329490609#gid=1329490609"
                    target="_blank" rel="noopener">Mở Google Sheet</a>
                <label class="pill" style="cursor:pointer"><input id="editToggle" type="checkbox"
                        style="margin-right:8px">Chế độ lấy toạ độ</label>
                <div style="display:flex;gap:6px">
                    <button id="zoomOut" class="btn" aria-label="Thu nhỏ">−</button>
                    <button id="zoomReset" class="btn" aria-label="Về 100%">100%</button>
                    <button id="zoomIn" class="btn" aria-label="Phóng to">+</button>
                </div>
            </div>
        </div>

        <div id="board" class="board">
            <div id="boardInner" class="board-inner">
                <div id="zoomLayer" class="zoom-layer">
                    <!-- Nền là SVG -->
                    <img id="floorImg" src="/assets/images/Factory-layout.svg" alt="Factory floor plan" />
                    <!-- Overlay vẽ vùng -->
                    <svg id="overlay" class="overlay" viewBox="0 0 100 100" preserveAspectRatio="none"
                        aria-hidden="true"></svg>
                </div>
            </div>
            <!-- Hotspots (điểm) sẽ được render vào zoomLayer để bám zoom/pan -->
        </div>

        <div class="coord-hint" id="coordHint" style="display:none">
            Nhấp lên bản vẽ để lấy toạ độ (%). Dùng cho <b>x_pct</b>, <b>y_pct</b> hoặc tính
            <b>rect_*</b>/<b>polygon</b> trong Sheet.
            <div style="margin-top:6px" id="coordVal">x: –, y: –</div>
        </div>
    </div>

    <script src="/assets/js/script.js"></script>

</body>

</html>